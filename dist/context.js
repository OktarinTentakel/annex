/*!
 * annex v0.1.0-dev
 */
/*!
 * Module Context
 */
const MODULE_NAME="Context";import{hasValue,isA,orDefault}from"./basic.js";import{throttle}from"./functions.js";import{createNode}from"./elements.js";import{reschedule}from"./timers.js";export let CURRENT_INTERACTION_TYPE;CURRENT_INTERACTION_TYPE=detectInteractionType();export function browserSupportsHistoryManipulation(){return hasValue(window.history)&&isA(window.history.pushState,"function")&&isA(window.history.replaceState,"function")}export function contextHasHighDpi(){return!!window.matchMedia&&window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.5),only screen and (-o-min-device-pixel-ratio: 3/2),only screen and (min--moz-device-pixel-ratio: 1.5),only screen and (min-device-pixel-ratio: 1.5),only screen and (min-resolution: 144dpi),only screen and (min-resolution: 1.5dppx)").matches}export function browserScrollbarWidth(){const e=createNode("div");e.style.visibility="hidden",e.style.opacity="0",e.style.pointerEvents="none",e.style.overflow="scroll",e.style.position="fixed",e.style.top="0",e.style.right="0",e.style.left="0",e.style.height="50px";const t=createNode("div");t.style.width="100%",t.style.height="100px",e.appendChild(t),document.body.appendChild(e);const o=e.offsetWidth-t.offsetWidth;return document.body.removeChild(e),o}export function detectInteractionType(e,t=!1){if(t=orDefault(t,!1,"bool"),CURRENT_INTERACTION_TYPE="ontouchstart"in document&&"ontouchend"in document&&window.navigator.maxTouchPoints>0?"touch":"pointer",isA(e,"function")){let o=!1,n=null;document.addEventListener("touchstart",(()=>{o=!0,"touch"!==CURRENT_INTERACTION_TYPE&&(CURRENT_INTERACTION_TYPE="touch",e(CURRENT_INTERACTION_TYPE))})),document.addEventListener("touchend",(()=>{n=reschedule(n,1032,(()=>{o=!1}))})),window.addEventListener("blur",(()=>{n=reschedule(n,1032,(()=>{o=!1}))})),document.addEventListener("mousemove",throttle(1e3,(()=>{"pointer"===CURRENT_INTERACTION_TYPE||o||(CURRENT_INTERACTION_TYPE="pointer",e(CURRENT_INTERACTION_TYPE))}))),t&&e(CURRENT_INTERACTION_TYPE)}return CURRENT_INTERACTION_TYPE}export function detectAppleDevice(e){let t=/iPhone|iPad|iPod|Macintosh/.exec(window.navigator.userAgent),o=null;if(Array.isArray(t)&&t.length>0?t=t[0]:(t=/^(iPhone|iPad|iPod|Mac)/.exec(window.navigator.platform),Array.isArray(t)&&t.length>0?(t=t[0],"Mac"===t&&(t="Macintosh")):t=null),hasValue(t)){switch("Macintosh"===t&&window.navigator.maxTouchPoints>1&&(t="iPad"),t){case"iPad":o="ipad";break;case"iPhone":o="iphone";break;case"iPod":o="ipod";break;case"Macintosh":o="mac"}isA(e,"function")&&(o=e(o))}return o}
//# sourceMappingURL=context.js.map
