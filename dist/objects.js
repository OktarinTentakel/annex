/*!
 * @oktarintentakel/annex v0.1.17-beta
 */
/*!
 * Module Objects
 */
const MODULE_NAME="Objects";import{getType,isFunction,isPlainObject,orDefault}from"./basic.js";export function clone(e,t=!0){if(t=orDefault(t,!0,"bool"),isFunction(e?.clone))return e.clone(t);const r=Array.from(arguments)[2]??[],n=Array.from(arguments)[3]??[];if(r.indexOf(e)>=0)return n[r.indexOf(e)];const c=getType(e);switch(c){case"array":const o=[...e];if(r.push(e),n.push(o),t){let e=o.length;for(;e--;)o[e]=clone(o[e],t,r,n)}return o;case"set":case"weakset":const s="weakset"===c?new WeakSet:new Set;return r.push(e),n.push(s),e.forEach((e=>{t?s.add(clone(e,t,r,n)):s.add(e)})),s;case"map":case"weakmap":const a="weakmap"===c?new WeakMap:new Map;return r.push(e),n.push(a),e.forEach(((e,c)=>{t?a.set(c,clone(e,t,r,n)):a.set(c,e)})),a;case"url":const u=new URL(e);return r.push(e),n.push(u),u;case"urlsearchparams":const l=new URLSearchParams(e.toString());return r.push(e),n.push(l),l;case"object":const p=Object.create(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__);r.push(e),n.push(p);for(let c in e)e.hasOwnProperty(c)&&(p[c]=t?clone(e[c],t,r,n):e[c]);return p;case"nodelist":const i=document.createDocumentFragment();if(t)e.forEach((e=>{t&&i.appendChild(clone(e,t,r,n))}));else for(;e.length;)i.appendChild(e.item(0));return i.childNodes;case"svgelement":const h=document.createElement("div");return h.innerHTML=e.outerHTML,h.firstChild;case"date":return new Date(e.getTime());case"regexp":return new RegExp(e);case"htmlelement":return e.cloneNode(t);default:return e}}export function merge(e,...t){return e=clone(e),Array.from(t).forEach((t=>{t=clone(t);for(let r in t)t.hasOwnProperty(r)&&(e.hasOwnProperty(r)&&isPlainObject(e[r])&&isPlainObject(t[r])&&Object.keys(t[r]).length>0?e[r]=merge(e[r],t[r]):e[r]=t[r])})),e}
//# sourceMappingURL=objects.js.map
